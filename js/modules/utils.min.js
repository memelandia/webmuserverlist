export function getOptimizedImageUrl(e,t,n={},r="img/logo_placeholder_small.png"){if(!t||"string"!=typeof t)return r;if(t.startsWith("data:")||t.startsWith("blob:"))return t;const{width:o,height:i,quality:a=80}=n;let s=t;return s.startsWith("/")||(s="/"+s),s}export function renderStars(e,t=5){if("number"!=typeof e||e<0||e>t)return"";let n="";for(let r=1;r<=t;r++)n+=r<=e?'<i class="fa-solid fa-star star-filled"></i>':'<i class="fa-regular fa-star star-empty"></i>';return n}export function formatDate(e){if(!e)return"Fecha no disponible";try{const t=new Date(e);return isNaN(t.getTime())?"Fecha inv√°lida":t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch{return"Error en fecha"}}export function formatDateTime(e){if(!e)return"Fecha no disponible";try{const t=new Date(e);return isNaN(t.getTime())?"Fecha inv√°lida":t.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Error en fecha"}}export function formatTimeAgo(e){if(!e)return"Fecha no disponible";try{const t=new Date(e),n=Date.now()-t.getTime(),r=Math.floor(n/1e3),o=Math.floor(r/60),i=Math.floor(o/60),a=Math.floor(i/24);return a>0?`hace ${a} d√≠a${1!==a?"s":""}`:i>0?`hace ${i} hora${1!==i?"s":""}`:o>0?`hace ${o} minuto${1!==o?"s":""}`:r>0?`hace ${r} segundo${1!==r?"s":""}":"ahora mismo"}catch{return"Error en fecha"}}export function truncateText(e,t=100){return e&&"string"==typeof e?e.length<=t?e:e.substring(0,t).trim()+"...":""}export function sanitizeHTML(e){if(!e||"string"!=typeof e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML}export function debounce(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}export function throttle(e,t){let n=!1;return function(...r){n||(e.apply(this,r),n=!0,setTimeout(()=>n=!1,t))}}export function generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}export function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}export function isValidURL(e){try{return new URL(e),!0}catch{return!1}}export function copyToClipboard(e){return navigator.clipboard?navigator.clipboard.writeText(e).then(()=>!0).catch(()=>!1):new Promise(t=>{const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),n.setSelectionRange(0,99999);const r=document.execCommand("copy");document.body.removeChild(n),t(r)})}export function getQueryParam(e){const t=new URLSearchParams(window.location.search);return t.get(e)}export function setQueryParam(e,t){const n=new URLSearchParams(window.location.search);n.set(e,t),window.history.replaceState({},"",`${window.location.pathname}?${n}`)}export function removeQueryParam(e){const t=new URLSearchParams(window.location.search);t.delete(e),window.history.replaceState({},"",`${window.location.pathname}?${t}`)}export function scrollToElement(e,t={}){const n=document.querySelector(e);if(n){const{offset:e=0,behavior:r="smooth"}=t;window.scrollTo({top:n.offsetTop+e,behavior:r})}}export function showNotification(e,t="info",n=5e3){const r=document.createElement("div");r.className=`notification notification-${t}`,r.innerHTML=`\n        <div class="notification-content">\n            <span class="notification-message">${e}</span>\n            <button class="notification-close" onclick="this.parentElement.parentElement.remove()">&times;</button>\n        </div>\n    `,document.body.appendChild(r),setTimeout(()=>{r.classList.add("show")},100),n>0&&setTimeout(()=>{r.classList.remove("show"),setTimeout(()=>r.remove(),300)},n)}export function validateServerData(e){const t=[];return e.name&&"string"==typeof e.name&&e.name.trim()||(t.push("El nombre del servidor es requerido"),e.name&&e.name.length<3&&t.push("El nombre debe tener al menos 3 caracteres"),e.name&&e.name.length>50&&t.push("El nombre no puede exceder 50 caracteres")),e.description&&"string"==typeof e.description&&(e.description.length<10&&t.push("La descripci√≥n debe tener al menos 10 caracteres"),e.description.length>500&&t.push("La descripci√≥n no puede exceder 500 caracteres")),e.website_url&&!isValidURL(e.website_url)&&t.push("La URL del sitio web no es v√°lida"),e.discord_url&&!isValidURL(e.discord_url)&&t.push("La URL de Discord no es v√°lida"),e.exp_rate&&("number"!=typeof e.exp_rate||e.exp_rate<1||e.exp_rate>1e4)&&t.push("La tasa de experiencia debe estar entre 1 y 10000"),e.drop_rate&&("number"!=typeof e.drop_rate||e.drop_rate<1||e.drop_rate>1e4)&&t.push("La tasa de drop debe estar entre 1 y 10000"),t}console.log("üõ†Ô∏è M√≥dulo de utilidades cargado");
